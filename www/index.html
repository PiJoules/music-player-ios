<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>My App</title>
    <!-- Path to Framework7 Library CSS-->
    <link rel="stylesheet" href="css/framework7.ios.min.css">
    <link rel="stylesheet" href="css/framework7.ios.colors.min.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="css/my-app.css">
  </head>
  <body>
    <!-- Status bar overlay for full screen mode (PhoneGap) -->
    <div class="statusbar-overlay"></div>
    <!-- Panels overlay-->
    <div class="panel-overlay"></div>
    <!-- Left panel with reveal effect-->
    <div class="panel panel-left panel-reveal">
      <div class="content-block">
        <p>Left panel content goes here</p>
      </div>
    </div>
    <!-- Views -->
    <div class="views">
      <!-- Your main view, should have "view-main" class -->
      <div class="view view-main">
        <!-- Top Navbar-->
        <div class="navbar">
          <div class="navbar-inner">
            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
            <div class="center sliding">Awesome App</div>
            <div class="right">
              <!-- 
                Right link contains only icon - additional "icon-only" class
                Additional "open-panel" class tells app to open panel when we click on this link
              -->
              <a href="#" class="link icon-only open-panel"><i class="icon icon-bars"></i></a>
            </div>
          </div>
        </div>
        <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes-->
        <div class="pages navbar-through toolbar-through">
          <!-- Page, "data-page" contains page name -->
          <div data-page="index" class="page">
            <!-- Scrollable page content -->
            <div class="page-content">
              <p>Page content goes here</p>
              <p><a id="playMp3" href="#" class="button">Play</a></p>
              <p>
                <audio id="player" controls autoplay>
                  <source src="" type="audio/mpeg" />
                </audio>
              </p>
            </div>
          </div>
        </div>
        <!-- Bottom Toolbar-->
        <div class="toolbar">
          <div class="toolbar-inner">
            <!-- Toolbar links -->
            <a href="#" class="link">Link 1</a>
            <a href="#" class="link">Link 2</a>
          </div>
        </div>
      </div>
    </div>
    <!-- Cordova -->
     <script type="text/javascript" src="cordova.js"></script>
    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="js/framework7.min.js"></script>
    <!-- Path to your app js-->
    <script type="text/javascript">
      // Initialize app
      var myApp = new Framework7();
       
      // If we need to use custom DOM library, let's save it to $$ variable:
      var $$ = Dom7;
       
      // Add view
      var mainView = myApp.addView('.view-main', {
        // Because we want to use dynamic navbar, we need to enable it for this view:
        dynamicNavbar: true
      });

      console.log(1);
      myApp.alert(1);
    </script>
    <script type="text/javascript" src="js/my-app.js"></script>
    <script type="text/javascript">
      function onDeviceReady() {
          if (window.cordova.logger) {
              window.cordova.logger.__onDeviceReady();
          }
          window.onerror = function(msg, url, line, col, error) {
             // Note that col & error are new to the HTML 5 spec and may not be 
             // supported in every browser.  It worked for me in Chrome.
             var extra = !col ? '' : '\ncolumn: ' + col;
             extra += !error ? '' : '\nerror: ' + error;

             // You can view the information in an alert to see things working like this:
             console.log("Error: " + msg + "\nurl: " + url + "\nline: " + line + extra);
          };
          console.log(2);
          document.getElementById("playMp3").addEventListener("touchend", playMP3, false);
          console.log(3);
      };

      function playMP3() {
          console.log("start playMP3");
          console.log(device.platform.toLowerCase());
          var mp3URL = getMediaURL("audio/leanon.mp3");
          console.log(mp3URL);
          $$("#player").attr("src", mp3URL);
          $$("#player").play();
          // var media = new Media(mp3URL, null, mediaError);
          // media.play();
          console.log("end playMP3");
      }

      function getMediaURL(s) {
          if(device.platform.toLowerCase() === "android") return "/android_asset/www/" + s;
          return s;
      }

      function mediaError(e) {
          myApp.alert('Media Error');
          myApp.alert(JSON.stringify(e));
      }

      console.log(5);
      document.addEventListener('deviceready', onDeviceReady, false);
      console.log(4);
    </script>
  </body>
</html>
